[h]DREYMAR'S (PKL Win): DreymaR's Extensive Yet Modular ARSenal (for Portable Keyboard Layout on Windows)[/h]

[i]WARNING - Some Assembly May Be Required (if you want a specific locale/ergo variant for instance)[/i]

[b]NOTE:[/b] This is the sister topic to my main [b][url=https://forum.colemak.com/viewtopic.php?id=1438]Big Bag Of Tricks[/url][/b] topic where I discuss the modifications below in detail along with their implementation into Linux (XKB for the X.Org server). In this topic the focus is on PKL implementations of the same "tricks". For a more detailed presentation of any of the topics below, please go to the main Big Bag topic. And bear with me for fleshing the Linux topic more out than the Windows one - it's really not about turf wars but about my editing capacity.

Note that there are also Big Bag implementation topics for hardware [b][url=https://forum.colemak.com/viewtopic.php?id=2158]USB-2-USB remapping devices (QUICKIE)[/url][/b] and one by user [user]mkborregaard[/user] with [b][url=https://forum.colemak.com/viewtopic.php?id=2020]Mac implementations of several Big Bag tricks[/url][/b].

    [img]https://www.dropbox.com/s/e21hymd7xpkrbli/TarmakCurl-5_ETROI_Spect.png?dl=1[/img]


My personal Colemak arsenal for PKL/Win now includes several other enhancements (again, also see the main topic linked to above):

[b]        [u]Character/Key Mapping Layers:[/u][/b]
[b][1.1][/b] My [b][url=https://forum.colemak.com/viewtopic.php?id=1280]Colemak[eD][/url] AltGr mappings[/b] (lv3–4; dead keys on symbol keys etc)
[b][1.2][/b] An [b][url=https://forum.colemak.com/viewtopic.php?id=2014]Extend layer[/url][/b] using Caps Lock as a switch modifier for navigation/editing/browsing/etc from near the home position
[b][1.3][/b] Several [b]Dead key enhancements[/b] giving access to lots of glyphs (presently for Windows/PKL only)

[b]        [u]Ergonomic Key Remappings:[/u][/b]
[b][2.1][/b] [b]Angle/Wide ergo modifications[/b] to improve wrist angles, hand spacing and right pinky stretch/load effort
[b][2.2]†[/b] The [b]Colemak [url=https://colemakmods.github.io/mod-dh/]Curl(DH)[/url] ergo mod[/b] (deprioritize middle columns without keys changing fingers)

[b]        [u]Other Layouts:[/u][/b]
[b][3.1][/b] [b][url=https://forum.colemak.com/viewtopic.php?id=1858]Tarmak[/url] transitional Colemak[/b] layouts for learning Colemak in smaller steps if so desired
[b][3.2]†[/b] For several [b][url=https://forum.colemak.com/viewtopic.php?id=1458]locales/scripts[/url][/b]:
            • A '[b]Unified Symbols[/b]' layout with only a few necessary changes from standard Colemak[eD]
            • Also, a layout to '[b]Keep Local Symbols[/b]' like their default (QWERTY-type) counterparts and key cap markings for that locale
            • Intuitive [b]Colemak phonetic layouts[/b] to write other scripts like Cyrillic, Greek and Hebrew (e.g., using a toggle switch key)
[b][3.3][/b] [b]Mirrored Colemak[/b] that allows one-handed typing without extra learning

[b]        [u][url=https://forum.colemak.com/post/10279/#p10279]Download and Setup:[/url][/u][/b]
[b][4.1][/b] [b][url=https://github.com/DreymaR/BigBagKbdTrixPKL]Download and Install[/url][/b] files for PortableKeyboardLayout (PKL) for Windows
[b][4.2][/b] [b]PKL Tips and Tricks[/b]

[b][–.–][/b] [b]Done/Todo[/b]

[b]†:[/b] For the most part, these files are not premade for Win/PKL (yet) due to the non-modular nature of PKL files.

I use Farkas Máté's excellent [url=http://pkl.sourceforge.net/]Portable Keyboard Layout[/url] ('PKL') to achieve most of the above for Windows.


[h][1.1]    COLEMAK[eD] - EDITION DREYMAR[/h]

My PKL layout.ini file (see links to downloads below) largely corresponds to its XKB counterpart when it comes to the lv3-4(AltGr) mappings. Note that since the Angle/Wide mods aren't modular in PKL I can't deliver all combinations of layout and ergo mod - I myself use both the Colemak[eD] mappings for Norwegian and the AngleWide-Slash/35 mod so that'll be there. I've also included a few others such as the non-Wide standard Colemak[eD] and a bunch of 'virtualkey' layouts that don't have separate lv3-4 mappings. Feel free to add your own; ask if you need help.


    [img]https://www.dropbox.com/s/e1on8tn4hvof0mr/Cmk-ANSI-eD_90d_FShui.png?dl=1[/img]
    [i]The Colemak [edition DreymaR] layout, using different lv3-4 mappings from Shai's default Colemak.[/i]
    [i]Shown on an ANSI keyboard with dead key emphasis (golden) and "FingerShui" color-coded proposed fingering.[/i]
    

    [img]https://www.dropbox.com/s/k1t0ha6m924bjlq/Cmk-ISO-eD-No-CurlAWide_90d_FShui.png?dl=1[/img]
    [i]Colemak-CAW[eD], showing the Norwegian 'us' variant on an ISO board with the Curl(DH)Angle and Wide(/) ergonomic mods (see below).[/i]


My PKL files have separate help images for each state and dead key, with and without Shift (which is quite a lot of images as there are 19 different dead keys now!), that activate when you need them. You can set your own hotkey to show/hide these, or use the default Ctrl+Shift+1. The help image will jump between the top and bottom of your screen if you mouse over it, so as to stay out of the way.


[h][1.2]    EXTEND LAYERS AND THE CAPS SWITCH MODIFIER[/h]

The Extend mappings using CapsLock (or another key of your choice, set in pkl.ini) as a modifier for all sorts of cool moving-keys-around, originated with autohotkey and PKL. I'm very happy with it and consider it a Life Hack on par with Colemak itself! This is one heavy reason I want a PKL implementation of my layout on any Windows PC I work on instead of settling for just a plain Colemak install.

For more info and tricks, see my [url=https://forum.colemak.com/viewtopic.php?pid=16698#p16698]Extend Extra Extreme[/url] topic.

From my pkl.ini file:
[code]
; These keys are modified/transposed by holding down the 'extend key' (CapsLock by default):
;+------+------+------+------+------+------+------+------+------+------+------+------+------+
;|Esc + |F1 <> |F2 << |F3 >> |F4 <> |F5 <> |F6 << |F7 >> |F8 <> |F9 <> |F10<> |F11<> |F12<> |
;| Caps | Play | Prev | Next | Stop | Mute | Vol- | Vol+ | Media| BrHom| Mail | App1 | App2 |
;+======+======+======+======+======+======+======+======+======+======+======+======+======+
;|` ¤¤¤ |1     |2     |3     |4     |5     |6     |7     |8     |9     |0     |-     |=     |
;| Cust | F1   | F2   | F3   | F4   | F5   | F6   | F7   | F8   | F9   | F10  | F11  | F12  |
;+------+------+------+------+------+------+------+------+------+------+------+------+------+
;|Tab   |Q ¤¤¤ |W *** |F <<> |P <>> |G *** |J ### |L ### |U ### |Y ### |; ¤¤¤ |[ ¤¤¤ |] ¤¤¤ |
;|      | Esc  | *WhUp| BrBck| BrFwd| *Up17| PgUp | Home | Up   | End  | Del  | Esc  | Ins  |
;+------+------+------+------+------+------+------+------+------+------+------+------+------+
;|Caps+ |A +++ |R *** |S +++ |T +++ |D *** |H ### |N ### |E ### |I ### |O ¤¤¤ |' ¤¤¤ |\ ><> |
;| ++++ | Alt  | *WhDn| Shift| Ctrl | *Dn17| PgDn | Left | Down | Right| Back | Apps | BrFav|
;+------+------+------+------+------+------+------+------+------+------+------+------+------+
;|< *** |Z ¤¤¤ |X === |C === |V === |B *** |K *** |M *** |, *** |. *** |/ *** |Spc ¤ |Entr¤ |
;| *WhLe| Undo | Cut  | Copy | Paste| *BtnL| BtnM | *BtnR| *Le17| *Ri17| *WhRi| Enter| PrtSc|
;+------+------+------+------+------+------+------+------+------+------+------+-------------+
;Legend: # Movement; + Modifiers; = GUI edit; * Mouse; <> MultiMedia; ¤ Various commands.
[/code]

The PKL implementation of my Extend layer is working fully. It includes sideways wheel scrolling, which the Linux version lacks (it has mousing on/off and a multi key instead). The WheelLeft key is mapped to ISO VK_102 which isn't available on ANSI boards, so if ANSI users want it they'll have to put it elsewhere. One might forgo one Esc key and put the WheelLeft/Right on the bracket keys for instance.

On the Tilde key I put a handy [url=https://forum.colemak.com/post/19992/#p19992]mouse homing key[/url] as a default. It's handy for retrieving or putting away your mouse cursor, or for accessing buttons and menus at the upper-left corner of your current window without touching the actual mouse. Another suggestion is Win+T which is quite convenient for opening the Taskbar which can then be navigated further with Extend-keys. Or whatever you like, really! :-)


    [img]https://www.dropbox.com/s/sxcsk0on5jbp1ac/Extend-ISO-NoWi-Win_90d.png?dl=1[/img]
    [i]A symbolic chart of my Extend mappings. Green, navigation; blue, mousing; orange, multimedia; gray, system/misc.[/i]


[h][1.3]    ENHANCED DEAD KEY MAPPINGS[/h]

This is one area where PKL has one up on XKB (for now)! I've got a "fully functional" set of dead keys with my own mappings on them so they're enhanced beyond pure accents. Also, there are help images that pop up when a dead key is hit.

There are 19 dead keys in my pkl layout right now. The common accents are there, together with a currency dead key on AltGr+4 and a Greek phonetic dead key on AltGr+5. Furthermore, some sparsely populated accent keys have been enhanced with extra content, such as superscripts/subscripts on acute/grave, fractions and negations on stroke/bar and ring symbols on ringabove. The most extensively reworked key is the double-acute which used to have only Uu and Oo and now contains a fairly rich set of math/science symbols (think of the double acute as akin to the equals and prime signs)! You really have to see them to believe them – I'll showcase some below but you can see them all using PKL (default Ctrl+Shift+1 for the help images):

01) Dot below
02) Hook, palatal hook
03) Horn, retroflex hook/tail
04) Currency:
    [img]https://www.dropbox.com/s/fcrps2y8gxgq3dd/dk04_currency.png?dl=1[/img]    [img]https://www.dropbox.com/s/0q1zsov1jzt9xa4/dk04sh_currency.png?dl=1[/img]
05) Greek (phonetic):
    [img]https://www.dropbox.com/s/u635qlsqzus8m1x/dk05_greek.png?dl=1[/img]    [img]https://www.dropbox.com/s/af6f7swvm5w4j24/dk05sh_greek.png?dl=1[/img]
06) Circumflex
07) Caron
08) Ogonek, comma below
09) Breve
10) Ring above, ring symbols:
    [img]https://www.dropbox.com/s/ao08n7m6awdb7o9/dk10_ringabove.png?dl=1[/img]    [img]https://www.dropbox.com/s/ezrzh2ewwzllne8/dk10sh_ringabove.png?dl=1[/img]
11) Macron
12) Double-acute, math/science:
    [img]https://www.dropbox.com/s/7mqklbxtbken7sq/dk12_dblacutesci.png?dl=1[/img]    [img]https://www.dropbox.com/s/cnqhigzwg94n1vh/dk12sh_dblacutesci.png?dl=1[/img]
13) Umlaut/diaeresis
14) Tilde
15) Acute, superscripts
    [img]https://www.dropbox.com/s/0dhe2lb23jm3s64/dk15_acute.png?dl=1[/img]    [img]https://www.dropbox.com/s/1ggyh52bratpnt2/dk15sh_acute.png?dl=1[/img]
16) Grave, subscripts
17) Cedilla
18) Dot above
19) Stroke/bar, fractions
    [img]https://www.dropbox.com/s/g5p9q84gzbf12rn/dk19_strokebar.png?dl=1[/img]    [img]https://www.dropbox.com/s/62ydgf3tqk7xq1c/dk19sh_strokebar.png?dl=1[/img]

Note that the dead keys interact in clever ways: Ring then 'angle' will produce 'arced angle', Tilde with 'equals' will produce 'equal or approximately equal', Stroke with many symbols will produce slashed symbols (e.g., from 'identical to' you get 'not identical to') etc. The sequence you press the dead keys in will usually matter: Start with the modifier(s) (such as dead_stroke for "not") then the symbol-producing key (such as dead_maths and then '=' which will usually produce '≡' but now gives you '≢' instead). At the moment, the only documentation for all this cleverness is snoping around the layout.ini files, but logic will take you far too.


[h][2.1]    THE ANGLE/WIDE ERGONOMIC KEYBOARD MODS[/h]

The Angle/Wide ergonomic mods have to be shoehorned into PKL, I'm afraid, as it has no modularity separating key codes from symbols. So I've made edits in the layout.ini file for my Wide mod and also had to make corresponding edits in the pkl.ini [extend] section to make it come together. You could then install both Wide and nonWide layouts and switch between them, but the Extend mappings would only be right for one or the other. And changing stuff is a bit hard. Maybe that's okay with you though.

    [img]https://www.dropbox.com/s/uiy9n0ktq7lhiip/Cmk-ISO-AWide-35_60d_FShui.png?dl=1[/img]
    [i]The AngleWide-Slash ('AWide-35') wide ergo mod for PC105/ISO keyboards.[/i]

In the pkl.ini file I have some snippets at the bottom which may be pasted into the [extend] section to implement a wide or non-wide Extend layer. It should be self-explanatory. There are also two template pkl.ini files for wide or non-wide which you could copy and rename to pkl.ini to easily get what suits you.

My help images for PKL are non-Wide only, but do show the Angle mod on an ISO/Euro keyboard. I'm sorry, but making extra images for other setups will be too much work for me! So please see if you can't wrap your head around the provided images even if they may not be exactly the same setup as your keyboard.


[h][2.2]    THE "CURL(DH)" COLEMAK ERGO MOD[/h]

The Curl(DH) ergo mod makes the home "row" curl like a relaxed hand does instead of forcing it to a straight line as was commonly thought best some years ago. This is achieved by moving the common D and H from their debated "middle trench" positions to the more comfortable lower-row C/M positions, while preserving the key-to-finger mappings of vanilla Colemak.

I've got some optional mappings in some of the layouts (such as the AngleWide-ISO and AngleWide-No ones) that you may activate by uncommenting their lines and commenting out the original lines. Not very official, yet...

    [img]https://www.dropbox.com/s/yk6trpvr2w5tdp8/Cmk-ISO-CurlAWide_90d_FShui.png?dl=1[/img]
    [i]The Colemak Curl(DH)Angle ergo modded layout.[/i]

There are special Tarmak steps to learn the Colemak-Curl(DH) gradually should you want to. See below.

I've dubbed my CurlAngleWide modded Colemak a [ins][b]Colemak-CAW[/b][/ins]! It's a Colemak at heart, but sufficiently modded that I wanted a snappy name for it. It's also a tip-of-the-hat to Billy MacCaw in CATS! ;-)


[h][3.1]    THE TARMAK TRANSITIONAL COLEMAK LAYOUTS[/h]

There's [url=https://forum.colemak.com/viewtopic.php?id=1858]a main forum topic on this[/url] that you may want to read.

See below for a download of all four steps plus "Tarmak0" (a.k.a. QWERTY) and "Tarmak5" (a.k.a. Colemak).

    [img]https://www.dropbox.com/s/gi1rh06u7ksdas3/Tarmak_Spectral_ETROI.png?dl=1[/img]
    [i]The 5-step Tarmak (transitional Colemak) layouts, spectrally color-coded from red (Tarmak#1) to violet (Colemak).[/i]

These transitional layouts were implemented as VirtualKey ones, so the lv3-4 (AltGr) and dead key mappings you'll get will be the same as on your installed keyboard layout in Windows. The layouts should support Extend mode fully. If you define several of them in your pkl.ini file, you can swiftly change between them should you wish to.

My pkl.ini files come with lines prepared for Tarmak progressions that you may simply uncomment (commenting out whatever else 'layout =' lines are active there) and start using. You may choose between a progression to vanilla Colemak or to Curl(DH)Angle-modded Colemak. Wide mods are not (yet) available for Tarmak, but they may not be that necessary as you can always go Wide after you've reached the goal.

There's a help image for each step, that you can see or hide with the shortcut Ctrl+Shift+1 (configurable in pkl.ini). Holding Shift will show the current and previous steps in different colors.

    [img]https://www.dropbox.com/s/25jf2k2tki1ua9k/TarmakCurl3_R_Spect.png?dl=1[/img]
    [i]The help image for the third Tarmak-Curl step. Unshifted version.[/i]


[h][3.2]    LOCALE & PHONETIC COLEMAK VARIANTS [i][TODO/WIP][/i][/h]

See [url=https://forum.colemak.com/viewtopic.php?id=1458]my Locale Variants forum topic[/url] for the various locale and non-latin script solutions!
(Warning: In most cases you'll have to change the PKL files yourself, or ask for help. Notable exceptions are the Rulemak layout for Cyrillic script.)

The locale layouts I've provided are for the most part only a "Latin" layout that can be switched between French/Portuguese/Spanish/Italian by un-/commenting some lines in the layout.ini file, and the Norwegian setup with the AngleWide mod. They usually work for, say, a US keyboard too, but there could be snags with some OEM_ keys (semicolon, slash, tilde, that sort of key). To make your own locale variant you'll want to copy the layout folder for my eD layout over to a new one, renaming it (and putting that new name into your pkl.ini file so the program can choose it!) and then editing the layout.ini file in there.

Only generic ISO help images are provided, as it's too much work to manually generate all the necessary images. I don't have a script like Farkas Máté did.

Example from my layout file showing Norwegian vs standard ISO mappings:
[code]
SC013 = P    1    p    P    --    π    ¶    ; QWERTY rR
SC014 = G    5    g    G    --    ŋ    Ŋ    ; QWERTY tT
;SC015 = OEM_4    4    [    {    *{Esc}    å    Å    ; QWERTY [{ ; Cmk-eD_ISO
SC015 = OEM_4    1    å    Å    *{Esc}    [    {    ; QWERTY [{ ; Cmk-eD-No
SC016 = J    5    j    J    --    ʃ    Ʃ    ; QWERTY yY[/code]
Note the following:
• The OEM_4 (Left Bracket) key has scan code SC015 so it's in the middle now; this is the Wide(35/Slash) ergonomic mod in action
• The Norwegian Åå letter on LBr is on lv1-2 mappings due to this being my Norwegian locale layout;
   the only keys that deviate from the standard setup are LBr(OEM_4), RBr(OEM_6) and LSGT(OEM_102).
   (Oh, and the lv3-4 of A because I moved the Ææ to RBr, but that's no biggie)
• On your keyboard these OEM_# numbers could be different as there's a difference between US/ANSI and Euro/ISO boards; try it out...


[h][3.3]    MIRRORED COLEMAK[/h]

I wish for PKL to support multiple Extend modes at some point in the future. For now, I made Mirrored Colemak by replacing the Extend mappings so you can't have both at the same time unfortunately. And that's too bad since it'd be a damn handy thing for one-handed typers!

If you look into the 'Other' folder of my full PKL folder (see link below), there's a partial pkl.ini file there named pkl_mirror.ini; you'll need to copy over the [extend] part of that to your pkl.ini file's corresponding [extend] section. I'm not sure whether the pkl_mirror.ini file is properly updated - let me know if you encounter something odd.


[h][4]    DOWNLOAD AND SETUP[/h]

There's a separate [b][url=https://forum.colemak.com/post/10279/#p10279]Download and Setup post[/url][/b] below.


[h]DONE:[/h]
• [b]2014-01-25[/b]: Added ANSI VirtualKey QWERTY+Colemak with the Wide(28) mod
• [b]2014-05-21[/b]: Revamped Tarmak layouts, with better docs, icons, help images etc
• [b]2014-11-06[/b]: Complete help image set for the Colemak-eD_ISO layout, dead key enhancements and Latin locale variants
• [b]2015-06-25[/b]: Tarmak layouts with help images and pkl.ini files for ISO/ANSI; Curl(DH)Angle ergo mods for ISO/ANSI (AngleZ and A-Wing)
• [b]2016-01-27[/b]: Implementation of the Tarmak steps up to and including the Curl(DbgHk) ergo mod, as vk_layouts.
• [b]2017-08-08[/b]: Implementation of the new unified Curl(DH) mod. Also, I finally moved everything to GitHub.


[h]TODO:[/h]
• Whatever I want to do with the layouts and stuff themselves, I'll discuss it in [url=https://forum.colemak.com/viewtopic.php?id=1438]the main Big Bag topic[/url]
• There's quite a lot that could be done with these files. More locales and help images, both wide and nonwide file sets...
• However, I'll only do any of that if someone really needs help and asks very nicely. ;)
• The main problem is that since PKL definitions aren't as modular as the XKB ones I'd have to make any changes in multiple file sets at once. Ugh.
• I'm actually considering having a stab at the PKL source code to see if I could modularize the images and key codes a bit. The Vortex ([user]vVv[/user]) mod looks best.
• A better and clearer implementation of Curl(DH) mods (with Colemak[eD] mappings?).




    [img]https://www.dropbox.com/s/ybzpmj95jky3vtl/Cmk-CAW_Unicomp_DreymaR_TN-Ninja_2017-08.png?dl=1[/img]
    [i]My Unicomp SpaceSaver Buckling Spring (IBM Model M type) ISO keyboard with "American Ninja" caps, splendidly sporting the Colemak-CAW layout.[/i]